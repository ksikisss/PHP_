# Документація веб-сайту Maybelline New York

Цей документ описує структуру маршрутів (сторінок) веб-сайту косметики Maybelline та внутрішні API ендпоінти, які використовуються для авторизації користувачів.

## 1. Структура сайту (Routes)
Нижче наведено перелік доступних PHP-сторінок, які виступають маршрутами для користувача. Всі маршрути обробляються через головний файл `index.php` з використанням GET-параметра `route`.

| Файл (Маршрут) | URL приклад | Призначення | Опис функціоналу |
| :------------- | :---------- | :---------- | :--------------- |
| index.php | `/index.php` | Головний роутер | Центральний файл, що розподіляє запити між різними сторінками сайту залежно від параметра `route` |
| home.php | `/index.php?route=home` | Головна сторінка | Каталог косметики Maybelline з відео-банером, новими продуктами, бестселерами та порадами щодо макіяжу |
| login.php | `/index.php?route=signin` | Сторінка входу | Форма авторизації користувача з валідацією полів та перевіркою облікових даних |
| register.php | `/index.php?route=signup` | Сторінка реєстрації | Форма створення нового акаунту з валідацією даних та підтримкою AJAX-запитів |
| api-demo.php | `/index.php?route=api-demo` | Демо-сторінка API | Інтерактивна демонстрація зовнішнього API http.cat для показу HTTP-кодів у вигляді котів |
| 404.php | Автоматично | Сторінка помилки 404 | Показується при запиті неіснуючого маршруту |

## 2. Внутрішні API ендпоінти та дії
Сайт має власну систему авторизації з використанням PHP та JSON-файлу для зберігання користувачів, а також додаткові дії для керування сесіями.
### Таблиця API Ендпоінтів

| Ендпоінт | HTTP Метод | Файл реалізації | Опис |
| :------- | :--------: | :-------------- | :--- |
| `/register.php` | POST | register.php | Реєстрація нового користувача |
| `/login.php` | POST | login.php | Авторизація користувача |
| `/index.php?logout=true` | GET | nav.php | Вихід з системи (знищення сесії) |

### Детальний опис API ендпоінтів
#### A. Реєстрація користувача
**Ендпоінт:** `/register.php`  
**Метод:** POST  
**Тип контенту:** `application/x-www-form-urlencoded` або `application/json` (для AJAX)

**Параметри запиту:**
- `name` (обов'язковий) - Ім'я користувача
- `login` (обов'язковий) - Унікальний логін (3-16 символів, тільки латинські літери та цифри)
- `email` (обов'язковий) - Електронна пошта у форматі user@example.com
- `phone` (обов'язковий) - Телефон у форматі +380XXXXXXXXX (9-13 цифр)
- `password` (обов'язковий) - Пароль мінімум 6 символів
- `password_confirm` (обов'язковий) - Підтвердження пароля

**Валідація:**
- Всі поля обов'язкові
- Email перевіряється на коректність формату
- Логін перевіряється регулярним виразом `/^[A-Za-z0-9]{3,16}$/`
- Паролі мають співпадати
- Перевірка унікальності логіну та email

**Відповідь при успіху:**
```json
{
    "success": true,
    "message": "Реєстрація успішна! Тепер ви можете увійти в систему.",
    "user": {
        "name": "Ім'я користувача",
        "email": "user@example.com"
    }
}
```

**Відповідь при помилці:**
```json
{
    "success": false,
    "message": "Текст помилки"
}
```
#### B. Авторизація користувача

**Ендпоінт:** `/login.php`  
**Метод:** POST  
**Тип контенту:** `application/x-www-form-urlencoded`

**Параметри запиту:**
- `login` (обов'язковий) - Логін або email користувача
- `password` (обов'язковий) - Пароль користувача

**Процес авторизації:**
1. Перевірка наявності користувача за логіном або email
2. Верифікація пароля за допомогою `password_verify()`
3. Створення сесії користувача при успішній авторизації
4. Перенаправлення на головну сторінку

**Відповіді:**
- При успіху: Перенаправлення на `/index.php?route=home`
- При помилці: Показ повідомлення про неправильні дані

#### C. Вихід з системи (Logout)

**Ендпоінт:** `/index.php?logout=true`  
**Метод:** GET  
**Файл реалізації:** nav.php

**Опис:** Завершує сесію користувача та перенаправляє на головну сторінку.

**Процес виходу:**
1. Знищення всіх даних сесії за допомогою `session_destroy()`
2. Перенаправлення на головну сторінку

**Відповідь:** Перенаправлення на `/index.php?route=home`

## 3. Зовнішні API (Інтеграції)
Сайт використовує один зовнішній API для демонстрації.

### Таблиця зовнішніх API

| API Сервіс | HTTP Метод | Ендпоінт (URL) | Файл реалізації | Опис |
| :--------- | :--------: | :------------- | :-------------- | :--- |
| HTTP Cat | GET | `https://http.cat/{code}` | api-demo.php | Показує зображення кота для заданого HTTP-коду статусу |

### Детальний опис зовнішніх API

#### A. HTTP Cat API
**Сервіс:** HTTP Cat  
**URL:** `https://http.cat/{code}`  
**Метод:** GET

**Опис:** API повертає зображення кота, що ілюструє певний HTTP-код статусу. Використовується тільки в демонстраційних цілях на сторінці api-demo.php.

**Параметри:**
- `code` - HTTP-код статусу (наприклад: 200, 404, 500)

**Приклад використання:**
```javascript
const url = `https://http.cat/404`;
// Повертає зображення кота з HTTP кодом 404
```

## 4. Структура даних
### Формат зберігання користувачів
Користувачі зберігаються у файлі `users.json` у наступному форматі:

```json
[
    {
        "id": "унікальний_ідентифікатор",
        "name": "Ім'я користувача",
        "login": "логін_користувача",
        "email": "user@example.com",
        "phone": "+380XXXXXXXXX",
        "password": "хеш_пароля",
        "created_at": "YYYY-MM-DD HH:mm:ss"
    }
]
```

### Сесії користувачів
Після успішної авторизації створюється PHP-сесія з наступними даними:
```php
$_SESSION['user'] = [
    'id' => 'ідентифікатор_користувача',
    'name' => 'імя_користувача',
    'email' => 'email_користувача',
    'login' => 'логін_користувача'
];
```

## 5. Використані ресурси (CDN та зовнішні файли)
Окрім власних файлів, сайт завантажує ресурси з зовнішніх джерел:

| Ресурс | URL / Джерело | Призначення |
| :----- | :------------ | :---------- |
| Pico CSS | `https://unpkg.com/@picocss/pico@latest/css/pico.min.css` | Мінімалістичний CSS-фреймворк для форм авторизації |
| Google Fonts | `https://fonts.googleapis.com/css2?family=Sofia+Sans` | Шрифт Sofia Sans для дизайну сайту |
| Локальні assets | `assets/` | Зображення продуктів, відео, іконки соціальних мереж |

## 6. Додаткові функції
### Порівняння текстів (matcher.js)

На головній сторінці реалізована функція порівняння двох фраз на наявність спільних слів:
- Видаляє розділові знаки
- Розбиває текст на слова
- Знаходить спільні слова між двома фразами
- Виводить результат користувачу

### Відеоплеєр (script.js)

Автоматичне перемикання відео-банера на головній сторінці:
- Циклічне відтворення трьох відео
- Обробка помилок завантаження
- Автоматичне перемикання після завершення відео
